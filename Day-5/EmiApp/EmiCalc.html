<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta name="description" content="">
    <meta name="author" content="">
    <link rel="shortcut icon" href="../../assets/ico/favicon.ico">
    <link href="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/css/bootstrap.min.css" rel="stylesheet">
    <title>EMI Calculator</title>
<style>
body {
  padding-top: 50px;
  background-color: aqua;
}
.starter-template {
  padding: 40px 15px;
  text-align: center;
}
</style>
</head>
<body>
<div class="container">
    <h3><center>Welcome to Abhishek's EMI Calculator</center></h3>
    <div class="row">
        <div class="starter-template col-sm-8">
            <form class="form-horizontal" role="form">

                <div class="form-group">
                    <label for="remAmount" class="col-sm-2 control-label">Amount</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="remAmount" placeholder="Enter Loan Amount">
                        </div>
                </div>
                
                <div class="form-group">
                    <label for="intrate" class="col-sm-2 control-label">Rate of Interest</label>
	                    <div class="col-sm-10">
		                    <input type="text" class="form-control" id="intrate" placeholder="Enter Rate of Interest">
	                    </div>
                </div>

                <div class="form-group">
                    <label for="tenure" class="col-sm-2 control-label">Tenure</label>
                        <div class="col-sm-10">
                            <input type="text" class="form-control" id="tenure" placeholder="Enter No of years">
                        </div>
            </div>

  <div class="form-group">
        <div class="col-sm-offset-2 col-sm-10">
            <button onclick="javascript:generateTable();return false;" class="btn btn-primary btn-lg">Generate Table</button>
        </div>
  </div>
</form>
<div id="content">
</div>
<script>
function generateTable(){
    document.getElementById("content").innerHTML = "";
    var date = new Date();
    var dateofEmi = 4;
    var dayOfEmi = dateofEmi - 1;
    var curMonth = date.getMonth() + 1;
    var curYear = date.getFullYear();
    var ydate = new Date(curYear,0,0);
    var ydate1 = new Date(curYear+1,0,0);
    var no_of_day_in_year = (ydate1-ydate)/(60*60*24*1000);
    var interest_rate = parseFloat(document.getElementById('intrate').value);
    var starting_amount = parseInt(document.getElementById('remAmount').value.replace(/,/g, ""));
    var emiAmount = 10000;
    var tenureYrs = parseInt(document.getElementById('tenure').value);
    var total_interest_paid = 0;
    var total_amount_paid = 0;
    var content = "";
    var content1 = "";
    content += "<table class='table'>";
    content += "<tr>";
    content += "<td>Total Remaining Amount<td/> <td>Total Interest<td/> <td>Remaining Amount at end of month<td/> <td>Month<td/> <td>Year<td/>";
    content += "<tr/>";
    while(starting_amount > 0){
        var lastDayOfMonth = (new Date(curYear, curMonth ,0)).getDate();
        var int_before_emi = (dayOfEmi*starting_amount*interest_rate)/(no_of_day_in_year*100);
        var int_after_emi = 0;
        if( (int_before_emi+starting_amount) > emiAmount ){
            int_after_emi = ((lastDayOfMonth-dayOfEmi)*(starting_amount-emiAmount)*interest_rate)/(no_of_day_in_year*100);
        }
        content += "<tr>";
        content += "<td>"+Math.round(starting_amount)+"<td/>";
        content += "<td>"+Math.round(int_before_emi+int_after_emi)+"<td/>";
        if(starting_amount > emiAmount ){
            starting_amount = starting_amount - emiAmount + int_before_emi + int_after_emi;
        }else{
            starting_amount = 0;
        }
        content += "<td>"+Math.round(starting_amount)+"<td/>";
        content += "<td>"+ (curMonth) +"<td/>";
        content += "<td>"+ (curYear) +"<td/>";
        content += "<tr/>";
        curMonth = curMonth + 1;
        if(curMonth == 13){
            curMonth = 1;
            curYear = curYear + 1;
            ydate = new Date(curYear,0,0);
            ydate1 = new Date(curYear+1,0,0);
            no_of_day_in_year = (ydate1-ydate)/(60*60*24*1000);
        }
        total_interest_paid = total_interest_paid + Math.round(int_before_emi + int_after_emi);
        total_amount_paid =  total_interest_paid + parseInt(document.getElementById('remAmount').value.replace(/,/g, ""));
    }
    content += "<table\>";
    content1 += "<table>";
    content1 += "<tr>";
    content1 += "<td> Total interest : "+total_interest_paid+"<td/>";
    content1 += "<tr>";
    content1 += "<td> Total Payment: "+total_amount_paid+"<td/>";
    content1 += "<tr\>";
    content1 += "<table\><br/>";
    var div = document.createElement('div');
    div.innerHTML = content1 + content;
    document.getElementById('content').appendChild(div);
    return false;
}
document.getElementById("remAmount").onblur = function (){
    this.value = parseFloat(this.value.replace(/,/g, ""))
                    .toFixed(2)
                    .toString()
                    .replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}
document.getElementById("emiAmount").onblur = function (){
    this.value = parseFloat(this.value.replace(/,/g, ""))
                    .toFixed(2)
                    .toString()
                    .replace(/\B(?=(\d{3})+(?!\d))/g, ",");
}
</script>
      </div>
<div class="col-sm-3 col-sm-offset-1">
	<script async src="http://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script>
	<!-- emi -->
	<ins class="adsbygoogle"
	     style="display:inline-block;width:160px;height:600px"
	     data-ad-client="ca-pub-1493057699568324"
	     data-ad-slot="8385666350"></ins>
	<script>
	(adsbygoogle = window.adsbygoogle || []).push({});
	</script>
</div>
</div>
    <div id="disqus_thread"></div>
    <script type="text/javascript">
        var disqus_shortname = 'emipg';
        (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = 'http://' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
        })();
    </script>
    <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">File</a></noscript>
    <a href="http://disqus.com" class="dsq-brlink">JS<span class="logo-disqus">File</span></a>
    </div>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.0/jquery.min.js"></script>
    <script src="http://netdna.bootstrapcdn.com/bootstrap/3.1.1/js/bootstrap.min.js"></script>
<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
</script>
  </body>
</html>
